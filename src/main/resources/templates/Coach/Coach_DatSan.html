<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="master/head::head"></head>
<body>
<!-- Sidebar -->
<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
        <div th:replace="master/master_coach/menu::menu"></div>
        <div class="layout-page">
            <div th:replace="master/navbar::navbar"></div>
            <div class="content-wrapper">
                <!-- Content -->
                <div class="container-xxl flex-grow-1 container-p-y">
                    <th:block th:fragment="content">
                        <!-- Nội dung các trang con thay thế ở đây -->
                        <div class="container py-5">
                            <h1 class="text-center text-black fw-bold mb-4">ĐẶT SÂN PICKELBALL</h1>

                            <!-- Thông báo (nếu có) -->
                            <div th:if="${message}" class="alert alert-success alert-dismissible fade show" role="alert">
                                <span th:text="${message}"></span>
                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                            </div>


                            <!-- Form đặt sân -->
                            <div class="card shadow-lg p-4 mb-5">
                                <form th:action="@{/coach/datsan}" th:object="${booking}" method="post">
                                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                    <div class="mb-3">
                                        <label for="court" class="form-label">Tên Sân:</label>
                                        <select id="court" th:field="*{court}" class="form-control" required>
                                            <option value="">Nhập tên sân</option>
                                            <option th:each="court : ${courts}" th:value="${court.id}" th:text="${court.name}"></option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="date" class="form-label">Ngày Đặt:</label>
                                        <input type="date" id="date" th:field="*{date}" class="form-control" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="startTime" class="form-label">Giờ Đặt:</label>
                                        <input type="time" id="startTime" th:field="*{startTime}" class="form-control" required>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">Xác Nhận Đặt Sân</button>
                                </form>
                            </div>

                            <!-- Danh sách sân đã đặt -->
                            <div class="card shadow-lg p-4">
                                <h2 class="text-center text-black mb-3">Danh Sách Sân Đã Đặt</h2>
                                <table class="table table-striped text-center">
                                    <thead class="table-primary">
                                    <tr>
                                        <th>ID</th>
                                        <th>Tên Sân</th>
                                        <th>Ngày</th>
                                        <th>Giờ</th>
                                        <th>Hành Động</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="booking : ${bookings}">
                                        <td th:text="${booking.id}"></td>
                                        <td th:text="${booking.court.name}"></td>
                                        <td th:text="${booking.date}"></td>
                                        <td th:text="${booking.startTime}"></td>
                                        <td>
                                            <button class="btn btn-primary btn-sm">Sửa</button>
                                            <form th:action="@{/coach/deleteBooking/{id}(id=${booking.id})}" method="post" style="display:inline;">
                                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                                                <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
                                            </form>
                                        </td>
                                    </tr>
                                    <tr th:if="${#lists.isEmpty(bookings)}">
                                        <td colspan="5">Chưa có sân nào được đặt.</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </th:block>
                </div>


                <!-- / Content -->
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>



</body>